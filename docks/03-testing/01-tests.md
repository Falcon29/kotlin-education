# Тестовые сценарии для Contact-center

#### **FR-001: Создание тикета клиентом**
| **Test ID** | T-001 |  
|-------------|-------|  
| **Requirement** | FR-001 |  
| **Scenario** | Клиент создает тикет с темой и описанием |  
| **Preconditions** | 1. Клиент авторизован<br>2. Система доступна |  
| **Test Steps** | **Given:** Клиент открывает форму создания тикета<br>**When:** Заполняет поля:<br> - Тема: `Проблема с доступом`<br> - Описание: `Не могу войти в ЛК`<br>**Then:**<br> - Тикет создан со статусом "Новый"<br> - Уведомление отправлено оператору |  
| **Test Data** | Тема: `Проблема с доступом`, Описание: `Не могу войти в ЛК` |  
| **Pass Criteria** | 1. Тикет отображается в списке клиента<br>2. Оператор видит тикет в очереди<br>3. Время создания < 2 сек |  
| **Environment** | STAGING (Chrome 116) |  

---  

#### **FR-002: Изменение статуса оператором**
| **Test ID** | T-002 |  
|-------------|-------|  
| **Requirement** | FR-002 |  
| **Scenario** | Оператор меняет статус тикета на "В работе" |  
| **Preconditions** | 1. Тикет со статусом "Новый"<br>2. Оператор авторизован |  
| **Test Steps** | **Given:** Оператор открывает тикет T-001<br>**When:** Выбирает статус "В работе"<br>**Then:**<br> - Статус обновлен<br> - Клиент получает уведомление |  
| **Test Data** | Статус: `В работе` |  
| **Pass Criteria** | 1. Статус изменен в системе<br>2. Уведомление доставлено клиенту |  
| **Environment** | PROD-like |  

---  

#### **FR-003: Ответ оператора в тикете**
| **Test ID** | T-003 |  
|-------------|-------|  
| **Requirement** | FR-003 |  
| **Scenario** | Оператор отправляет ответ клиенту |  
| **Preconditions** | 1. Тикет со статусом "В работе"<br>2. Оператор авторизован |  
| **Test Steps** | **Given:** Оператор открывает тикет T-001<br>**When:** Вводит текст: `Проверьте логин/пароль`<br>**Then:**<br> - Ответ сохранен<br> - Статус меняется на "Ожидает подтверждения" |  
| **Test Data** | Ответ: `Проверьте логин/пароль` |  
| **Pass Criteria** | 1. Ответ отображается в истории тикета<br>2. Клиент получает уведомление |  
| **Environment** | STAGING |  

---  

#### **FR-004: Закрытие тикета клиентом**
| **Test ID** | T-004 |  
|-------------|-------|  
| **Requirement** | FR-004 |  
| **Scenario** | Клиент закрывает тикет после решения проблемы |  
| **Preconditions** | 1. Тикет со статусом "Ожидает подтверждения"<br>2. Клиент авторизован |  
| **Test Steps** | **Given:** Клиент открывает тикет T-001<br>**When:** Нажимает "Закрыть" и выбирает причину: `Проблема решена`<br>**Then:**<br> - Статус меняется на "Закрыт"<br> - Оператор получает уведомление |  
| **Test Data** | Причина: `Проблема решена` |  
| **Pass Criteria** | 1. Статус "Закрыт"<br>2. Уведомление доставлено оператору |  
| **Environment** | PROD-like |  

---  

#### **PERF-001: Скорость загрузки списка тикетов**
| **Test ID** | T-005 |  
|-------------|-------|  
| **Requirement** | PERF-001 |  
| **Scenario** | Загрузка списка тикетов под нагрузкой |  
| **Preconditions** | 1. База содержит 10 000 тикетов<br>2. Настроен JMeter |  
| **Test Steps** | **Given:** 200 виртуальных пользователей<br>**When:** Отправляют запросы на загрузку списка<br>**Then:**<br> - 95% запросов завершаются ≤1.5 сек<br> - Ошибок 0% |  
| **Test Data** | Тикеты: 10 000 (разные статусы) |  
| **Pass Criteria** | 1. p95 latency ≤ 1500 мс<br>2. Error rate = 0% |  
| **Environment** | Load Zone (Yandex.Cloud) |  

---  

#### **SEC-004: Проверка доступа к чужим тикетам**
| **Test ID** | T-006 |  
|-------------|-------|  
| **Requirement** | SEC-004 |  
| **Scenario** | Клиент пытается открыть чужой тикет |  
| **Preconditions** | 1. Тикет T-001 принадлежит другому клиенту<br>2. Пользователь авторизован |  
| **Test Steps** | **Given:** Клиент открывает URL тикета T-001<br>**When:** Система проверяет права доступа<br>**Then:**<br> - Доступ запрещен<br> - Показывается ошибка 403 |  
| **Test Data** | Тикет ID: `T-001` (принадлежит ClientA) |  
| **Pass Criteria** | 1. HTTP-код 403<br>2. Запись в логе безопасности |  
| **Environment** | PROD |  

---  

### Почему формат соответствует стандартам?
1. **BDD-подход**:
    - Шаги `Given/When/Then` (ISO 29119).
    - Пример для FR-003:
      ```gherkin  
      Scenario: Operator replies to ticket  
        Given ticket status is "In Progress"  
        When operator sends message "Check your password"  
        Then status changes to "Awaiting confirmation"  
      ```  

2. **Трассируемость**:
   ```mermaid  
   graph LR  
     A[US-003: Ответ оператора] --> B[FR-003]  
     B --> C[T-003]  
     C --> D[JIRA: CONTACT-42]  