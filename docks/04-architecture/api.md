# API контакт-центра

### 1. Сущности
**Тикет (Ticket)**

| Поле          | Описание                                | Пример значения               |
|---------------|-----------------------------------------|-------------------------------|
| title         | Заголовок обращения                    | "Проблема с доступом в ЛК"    |
| description   | Детальное описание проблемы            | "Не могу войти с 10:00"       |
| status        | Статус: "new", "in_progress", "closed" | "new"                         |
| clientId      | ID создавшего клиента                  | "client:123"                  |
| operatorId    | ID назначенного оператора (опционально)| "operator:456"                |
| priority      | Приоритет: "low", "medium", "high"     | "medium"                      |

### 2. Основные методы
**CRUD для тикетов**
1. **`tickets.create`** - Создание тикета
    - Правила: Только клиенты могут создавать, автоматический статус "new"

2. **`tickets.update`** - Обновление тикета
    - Правила: Оператор может менять статус, клиент - только закрывать

3. **`tickets.get`** - Получение тикета
    - Правила: Клиент видит только свои, оператор - назначенные

4. **`tickets.list`** - Список тикетов
    - Фильтры: По статусу, приоритету (для операторов)

**Специальные методы**
5. **`tickets.assign`** - Назначение оператора
    - Правила: Только модераторы или админы

6. **`tickets.search`** - Поиск по истории (для FAQ)
    - Возвращает: Популярные решения (если реализовано)

### 3. Бизнес-правила
1. **Права доступа**:
    - Клиент: Создание/просмотр своих тикетов
    - Оператор: Просмотр назначенных + изменение статуса
    - Модератор: Полный доступ + перераспределение

2. **Жизненный цикл тикета**:
   - New->InProgress->Closed;
   - New->Closed (клиент закрыл самостоятельно);
   
3. **Ограничения**:
   - Максимум 5 активных тикетов на клиента
   - Автозакрытие через 7 дней без ответа

**Пример запроса**
```json
POST /api/tickets
{
  "title": "Не работает кнопка сохранения",
  "description": "При нажатии ничего не происходит",
  "priority": "high"
}
```